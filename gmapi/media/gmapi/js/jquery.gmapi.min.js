jQuery(function(f){function o(a,b){function c(){return a.apply(this,b)}c.prototype=a.prototype;return new c}function m(a,b){b=b||window.google.maps;a=a.split(".");return a.length>1?m(a.slice(1).join("."),b[a[0]]):b[a[0]]}function p(a,b){a.openInfo=function(){if(a instanceof google.maps.Map)b.open(a);else a instanceof google.maps.Marker&&b.open(a.getMap(),a)};a.closeInfo=function(){b.close()};a.getInfo=function(){return b}}function g(a,b){if(a==="div")return b;if(f.isPlainObject(a)||f.isArray(a)){if(a.cls){var c=
[];if(a.arg)for(var d in a.arg)c.push(g(a.arg[d],b));d=o(m(a.cls),c);a.nfo&&p(d,g(a.nfo,b));return d}if(a.val)return m(a.val);for(c in a)a[c]=g(a[c],b)}return a}function h(a){var b=new google.maps.LatLngBounds;if(a instanceof google.maps.MVCArray||f.isArray(a)||f.isPlainObject(a))for(var c in a)b.union(h(a[c]));else if(a instanceof google.maps.LatLng)b.extend(a);else if(a instanceof google.maps.Marker)b.extend(a.getPosition());else if(a instanceof google.maps.Polyline)b.union(h(a.getPath()));else a instanceof
google.maps.Polygon&&b.union(h(a.getPaths()));return b}function i(a){return function(){var b=f(this),c=b.data(a);for(var d in c)c[d].setMap(null);b.removeData(a);b.trigger("remove_"+a,[c])}}function j(a,b){return function(){if(b){var c=f(this),d=c.data("map"),e=c.data(a)||[];for(var k in b){var n=g(b[k],this);n.setMap(d);e.push(n)}c.data(a,e);c.trigger("add_"+a,[e])}}}function l(a,b){return function(){var c=f(this),d=c.data("map"),e=c.data(a);if(d&&e){var k=h(e);if(b>=0){d.setZoom(b);d.setCenter(k.getCenter())}else d.fitBounds(k)}c.trigger("fit_"+
a,[e])}}f.fn.extend({removeMarkers:function(){return this.each(i("markers"))},removePolylines:function(){return this.each(i("polylines"))},removePolygons:function(){return this.each(i("polygons"))},addMarkers:function(a){return this.each(j("markers",a))},addPolylines:function(a){return this.each(j("polylines",a))},addPolygons:function(a){return this.each(j("polygons",a))},fitMarkers:function(a){return this.each(l("markers",a))},fitPolylines:function(a){return this.each(l("polylines",a))},fitPolygons:function(a){return this.each(l("polygons",
a))},newMap:function(a){var b=[];b.mkr="markers";b.pln="polylines";b.pgn="polygons";return this.each(function(){var c=f(this);for(var d in b)i(b[d]).call(this);c.removeData("map");var e=g(a,c.children("div")[0]);c.data("map",e);for(d in b)if(d in a){j(b[d],a[d]).call(this);e.getCenter()||l(b[d],e.getZoom()).call(this)}c.trigger("new_map")})}});f("div.gmap:visible").each(function(){var a=f(this),b=a.children("div"),c=(b.attr("class").match(/{.*}/)||[])[0];if(c){b.removeClass();a.newMap(f.parseJSON(c));
var d=a.children("img"),e=window.setTimeout(function(){d.css("z-index",-1)},2E3);google.maps.event.addListenerOnce(a.data("map"),"tilesloaded",function(){window.clearTimeout(e);d.css("z-index",-1)})}})});