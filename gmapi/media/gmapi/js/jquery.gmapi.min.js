jQuery(function(d){function j(a,b){function c(){return a.apply(this,b)}c.prototype=a.prototype;return new c}function g(a,b){b=b||window.google.maps;a=a.split(".");return a.length>1?g(a.slice(1).join("."),b[a[0]]):b[a[0]]}function f(a,b){if(a==="div")return b;if(d.isPlainObject(a)||d.isArray(a)){if(a.cls){var c=[];if(a.arg)for(var e in a.arg)c.push(f(a.arg[e],b));return j(g(a.cls),c)}if(a.val)return g(a.val);for(c in a)a[c]=f(a[c],b)}return a}d.fn.removeMarkers=function(){return this.each(function(){var a=
d(this),b=a.data("markers");for(var c in b)b[c].setMap(null);a.removeData("markers")})};d.fn.addMarkers=function(a){return this.each(function(){if(a){var b=d(this),c=b.data("map"),e=b.data("markers")||[];for(var h in a){var i=f(a[h],this);i.setMap(c);e.push(i)}b.data("markers",e)}return false})};d.fn.fitMarkers=function(){return this.each(function(){var a=d(this),b=a.data("map");a=a.data("markers");if(b&&a){var c=new google.maps.LatLngBounds;for(var e in a)c.extend(a[e].getPosition());b.fitBounds(c)}})};
d.fn.newMap=function(a){return this.each(function(){var b=d(this);b.removeMarkers().removeData("map");var c=f(a,b.children("div")[0]);b.data("map",c);if(a.mkr){b.addMarkers(a.mkr);c.getCenter()&&c.getZoom()>=0||b.fitMarkers()}b.trigger("newmap");return false})};d("div.gmap:visible").each(function(){var a=d(this),b=a.children("div"),c=b.attr("class").match(/{.*}/)[0];if(c){b.removeClass();a.newMap(d.parseJSON(c));var e=a.children("img"),h=window.setTimeout(function(){e.css("z-index",-1)},2E3);google.maps.event.addListenerOnce(a.data("map"),
"tilesloaded",function(){window.clearTimeout(h);e.css("z-index",-1)})}})});